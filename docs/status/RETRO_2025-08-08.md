# Azul Analysis Tool — Project Retrospective (2025-08-08)

## Highlights
- Core systems are stable: multi-engine analysis, exhaustive analysis flows, UI session management, and documented APIs.
- Documentation breadth is strong; planning and technical guides are extensive and navigable.
- UI refactor plan is concrete with phased, low-risk sequencing.

## What Went Well
- Exhaustive search pipeline and dashboards are complete and documented end-to-end.
- Move Quality refactor into modular components reduced complexity and improved resiliency.
- Docs consolidation and clear priority framing (P0–P3) improved focus.

## Gaps and Inconsistencies (Code ↔ Docs)
- Backend framework mismatch: top-level `README.md` calls the API “FastAPI-based” while implementation is Flask (`api/app.py`).
- Auth method mismatch: architecture doc mentions JWT; code and API docs use session header `X-Session-ID`.
- Packaging metadata issues in `pyproject.toml`:
  - License set to GPL-3.0, but `README.md` states MIT.
  - Script entry `azserver = "api.server:main"` points to a non-existent module (server startup is `start_server.py`).
- Quick Start repo path uses `AZUL-RESEARCH` stub; this repo is `azul-analysis-tool`.
- Real-time updates: docs promise push updates; code uses polling. SSE/WebSockets not yet implemented.
- UI build system: still using global script tags; code-splitting intentionally deferred; no bundler configured.
- MCTS limitations: early-game rollout policy and terminal detection TODOs remain; some `NotImplementedError`/TODOs in optimization/MCTS utilities.

## Open TODO Hotspots (representative)
- MCTS/optimization: early terminal check, rollout policy quality, PV handling.
- Strategic API: placeholder `strategic_move_suggestions` not implemented.
- Neural/train: policy generation TODOs; mapping policy→moves is documented but still flagged in archives.
- UI: Tactical Training, Performance Analytics, Advanced Analysis Lab still stubbed in places (TODO markers).

## Risks
- Conflicting license statements (GPL vs MIT) create distribution uncertainty.
- Mixed auth/docs could confuse integrators and test writers.
- Packaging scripts/metadata drift will block clean installs and CLI.
- UI performance improvements deferred may affect perceived responsiveness on lower-end devices.

## Prioritized Focus (Next 2–4 Weeks)
### P0 (must-do)
1. Documentation and metadata alignment
   - [DONE] Fix backend label to Flask in `README.md` and architecture overview.
   - [DONE] Align auth documentation to session header (`X-Session-ID`).
   - [DONE] Resolve license: adopt GPL-3.0; align `LICENSE`, `pyproject.toml`, and `README.md`.
   - [DONE] Correct Quick Start repo path and URLs.
2. Packaging and entry points
   - [DONE] Add `api/server.py` so `azserver = "api.server:main"` works.
   - [DONE] Sanity-check/adjust optional extras; remove self-referencing extras in `all`.
3. Testing posture
   - Ensure non-Selenium test approach remains the default and documented [[memory:5375148]].
   - Add quick smoke tests for startup and health endpoints using Flask test client.

### P1 (high-value)
1. MCTS quality
   - Implement early-game rollout improvements and terminal detection; add regression tests with known positions.
2. Real-time updates
   - Introduce SSE/WebSocket channel for long-running analyses; retain polling fallback.
3. UI refactor Phase 2 items
   - Onboarding + contextual help MVP integration (help.js + annotations) and basic analytics of help usage.

### P2 (nice-to-have)
- Accessibility and performance polish (virtual lists, memoization for hot paths).
- Export/share flows for analysis results (JSON/CSV UI actions + API endpoints).

## Concrete Action Items
- Docs/code alignment
  - [DONE] Update `README.md` (Flask, correct URLs, license, usage paths).
  - [DONE] Update `docs/technical/architecture.md` (auth: session header; remove JWT claims unless planned/fenced).
  - [DONE] Update `docs/QUICK_START.md` repository path and commands.
- Packaging
  - [DONE] Fix `pyproject.toml` name/URLs/scripts/license alignment.
- MCTS
  - Implement terminal detection and revise rollout policy; gate behind config; add tests covering early-game positions.
- Real-time
  - Add `/api/v1/events` (SSE) or WS; wire minimal client in Exhaustive dashboard with feature flag.
- UI
  - Land `ui/utils/help.js` + `ui/styles/help.css` and annotate key controls; publish short authoring guide.

## Definition of Done (near-term)
- All public docs reflect Flask backend and session-based auth.
- License is consistent across `LICENSE`, `README.md`, and `pyproject.toml`.
- `azserver` entry launches the app successfully; CI installs with extras.
- MCTS early-game behavior validated against 5–10 canonical positions.
- Exhaustive dashboard can stream progress over SSE behind a toggle.

## Proposed Timeline
- Week 1: Docs/metadata fixes; packaging entry points; health/startup tests; help MVP wiring.
- Week 2: MCTS terminal + rollout improvements with tests; minimal SSE channel + UI toggle.
- Week 3–4: UI onboarding + contextual help coverage; performance/accessibility polish; optional export endpoints.

## Metrics to Track
- API: p50/p95 latency for health and analysis endpoints; error rate.
- UI: time-to-first-render; memory use on exhaustive dashboard; interaction responsiveness (<100ms target).
- Quality: test pass rate; MCTS correctness vs baselines; user friction reports (help tooltip usage).

## Notes
- Keep Selenium out of scope in favor of API/unit/integration tests [[memory:5375148]].
- Defer bundler/code-splitting until refactor Phase 4 to minimize risk.


